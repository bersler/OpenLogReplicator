= OpenLogReplicator.json - writer element
:author: Adam Leszczyński <aleszczynski@bersler.com>
:revnumber: 1.9.0
:revdate: 2026-01-23
:icons: font
:url-librdkafka-parameters: https://github.com/confluentinc/librdkafka/blob/master/CONFIGURATION.md

[frame="none",grid="none"]
|====
|[.small]#Author: {author}, version: {revnumber}, date: {revdate}#
|====

This document describes the `writer` element of the OpenLogReplicator JSON configuration.
It explains available writer types, their parameters, valid values and usage notes.

[[writer]]
[width="100%",cols="a,a,50%a",options="header"]
.Writer element
|===

|Parameter
|Type / constraints
|Description and notes

|`topic`
|_string_, max length: 256, mandatory for Kafka
|Name of the Kafka topic to which transactions are published as JSON messages.

_NOTE:_ Valid only for `kafka` writer type.

|`type`
|_string_, max length: 256, mandatory
|Writer implementation to use.
Supported values:

* `discard` — No-op writer.
Parsing and message construction are performed, but messages are discarded instead of sent.
TIP: Useful for testing parsing and message construction.
This writer takes no additional parameters.

* `file` — Writes messages to a file on disk.

* `kafka` — Sends messages to Apache Kafka via a producer.

* `network` — Streams messages over plain TCP.
OpenLogReplicator acts as a server; a client connects to receive messages.
The server buffers transactions while no client is connected.

* `zeromq` — Streams messages over ZeroMQ.
Functionally similar to `network` but uses ZeroMQ transport.

|`uri`
|_string_, max length: 256, mandatory for `network` / `zeromq`
|Connection endpoint.

* For `network`: `<host>:<port>` — host and port for the TCP listener.
* For `zeromq`: `<protocol>://<host>:<port>` — ZeroMQ connection URI.

_NOTE:_ Valid only for `network` and `zeromq` writer types.

|`append`
|_integer_, min: 0, max: 1, default: 1
|When true (`1`), existing output files are appended to; otherwise new files are created.
Only applies to `file` writer.

_CAUTION:_ `output` and `append` cannot be used together.

|`max-message-mb`
|_integer_, min: 1, max: 953, default: 100
|Maximum Kafka message size in megabytes.
Messages exceeding this size will be split; each split triggers a log warning.

_NOTE:_ Memory for this buffer is allocated separately from general client memory settings.
Valid only for `kafka`.

|`max-file-size`
|_integer_, min: 0, default: 0
|Maximum size (in bytes) for output files when `output` includes `%i` or `%t`.
A value of `0` disables file rotation.

_NOTE:_ Valid only for `file` writer and requires `output` to use `%i` or `%t`.

|`new-line`
|_integer_, min: 0, max: 2, default: 0
|Append newline after each transaction when writing to a file:

* `0` — none
* `1` — Unix line ending (`\n`)
* `2` — Windows line ending (`\r\n`)

_NOTE:_ Valid only for `file`.

|`output`
|_string_, max length: 256
|Output filename format, using `strftime`-style specifiers and custom placeholders:

* `%i` — autogenerated sequence id (starts at 0)
* `%t` — timestamp formatted by `timestamp-format`
* `%s` — database sequence number

_NOTE:_ Prefer a single placeholder.
If using `%i` or `%t`, set `max-file-size` > 0.
Valid only for `file`.

|`poll-interval-us`
|_integer_, min: 100, max: 3600000000, default: 100000
|Polling interval in microseconds for the client library to check for delivery or new events.

_TIP:_ Smaller values reduce delivery latency but increase CPU usage; larger values increase buffering.

_NOTE:_ Valid for `kafka`, `network`, and `zeromq`.

|`properties`
|_map_ (string -> string)
|Additional Kafka producer properties (see {url-librdkafka-parameters}[librdkafka configuration]).

Common examples:

- `"bootstrap.servers": "host1:9092,host2:9092"`
- `"compression.codec": "snappy"`
- `"message.send.max.retries": "3"`
- `"retry.backoff.ms": "500"`
- `"queue.buffering.max.ms": "1000"`
- `"enable.idempotence": "true"`

_CAUTION:_ Do not set `message.max.bytes` here; message size is governed by `max-message-mb`.

_NOTE:_ Valid only for `kafka`.

|`queue-size`
|_integer_, min: 1, max: 1000000, default: 65536
|Maximum number of messages that can be queued for sending.
Larger values increase throughput at the cost of memory.

|`timestamp-format`
|_string_, max length: 256, default: "%F_%T"
|`strftime`-style format used to render `%t` in `output` filenames.

_NOTE:_ Valid only for `file`.
Refer to your C library's `strftime` documentation for supported specifiers.

|`write-buffer-flush-size`
|_integer_, min: 0, max: 1_048_576, default: 1_048_576
|When writing to files, the buffer is flushed when this many bytes are accumulated.
A value of `0` forces an immediate flush after each message.

_TIP:_ Larger values reduce I/O frequency but may increase latency and risk of data loss on crash.
The buffer will also flush at most every `poll-interval-us` microseconds.

_NOTE:_ Valid only for `file`.

|===
